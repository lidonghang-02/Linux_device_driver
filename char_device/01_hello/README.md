# Linux内核模块的加载和卸载
> 最简单的内核模块，包括内核模块的加载和卸载。

## 运行
```
make
// 加载
insmod hello.ko
// 卸载
rmmod hello
```
    
## 模块加载函数

Linux内核模块加载函数一般以 **`__init`** 标识声明，然后用 **`module_init(函数名)`** 的形式指定

加载函数返回一个整形值，若初始化成功，返回0，失败返回错误编码。

在Linux中，所有标识为`__init`的函数如果直接编译进入内核，成为内核镜像的一部分，在连接的时候都会放在`.init.text`这个区段内。

所有的`__init`函数在区段`.initcall.init`中还保存了一份函数指针，在初始化时内核会通过这些函数指针依次调用这些函数，并且在初始化完成后，释放`init`区段的内存。


## 模块卸载函数

Linux内核模块卸载函数一般以 **`__exit`** 标识声明，然后用 **`module_exit(函数名)`** 的形式指定

卸载函数不返回任何值。
